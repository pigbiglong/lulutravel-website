<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic China - 8 Days | lulutravel</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <!-- Dropdown CSS -->
    <link rel="stylesheet" href="css/dropdown.css">
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-config.js"></script>
    <script src="js/auth.js"></script>
    <style>
        .product-hero {
            position: relative;
            height: 70vh;
            min-height: 500px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        
        .product-hero-bg {
            position: absolute;
            inset: 0;
        }
        
        .product-hero-bg img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(26,26,26,0.9) 0%, rgba(26,26,26,0.3) 50%, transparent 100%);
        }
        
        .product-hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            color: white;
            padding-bottom: 80px;
            max-width: 800px;
        }
        
        .product-tag {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #C4A77D;
            margin-bottom: 16px;
        }
        
        .product-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 16px;
        }
        
        .product-subtitle {
            font-size: 1.25rem;
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 24px;
        }
        
        .product-meta {
            display: flex;
            gap: 32px;
            justify-content: center;
            font-size: 0.95rem;
        }
        
        .product-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .product-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 40px;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 80px;
        }
        
        @media (max-width: 900px) {
            .product-container {
                grid-template-columns: 1fr;
                padding: 60px 24px;
            }
        }
        
        .product-content {
            padding-right: 40px;
        }
        
        @media (max-width: 900px) {
            .product-content {
                padding-right: 0;
            }
        }
        
        .product-description {
            font-size: 1.1rem;
            color: #444;
            line-height: 1.9;
            margin-bottom: 40px;
        }
        
        .itinerary {
            margin: 50px 0;
        }
        
        .itinerary h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: #2D4A3E;
            margin-bottom: 24px;
        }
        
        .day-item {
            display: flex;
            gap: 24px;
            padding: 24px 0;
            border-bottom: 1px solid #eee;
        }
        
        .day-item:last-child {
            border-bottom: none;
        }
        
        .day-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.25rem;
            font-weight: 500;
            color: #2D4A3E;
            min-width: 60px;
        }
        
        .day-content h4 {
            font-size: 1.1rem;
            color: #1A1A1A;
            margin-bottom: 6px;
        }
        
        .day-content p {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.6;
        }
        
        .booking-section {
            position: relative;
        }
        
        .booking-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.08);
            position: sticky;
            top: 100px;
        }
        
        .booking-header {
            text-align: center;
            padding-bottom: 24px;
            border-bottom: 1px solid #eee;
            margin-bottom: 24px;
        }
        
        .price-amount {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 3rem;
            font-weight: 600;
            color: #2D4A3E;
            letter-spacing: -0.02em;
            font-variant-numeric: tabular-nums;
        }
        
        .price-note {
            font-size: 0.9rem;
            color: #888;
            margin-top: 4px;
        }
        
        .booking-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            color: #666;
            margin-bottom: 8px;
            letter-spacing: 0.05em;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e5e5;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2D4A3E;
            background: white;
            box-shadow: 0 0 0 4px rgba(45, 74, 62, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #2D4A3E 0%, #4A7C59 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(45, 74, 62, 0.3);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .login-notice {
            background: linear-gradient(135deg, #F5F2EB 0%, #EEE8DD 100%);
            padding: 16px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .login-notice:hover {
            background: linear-gradient(135deg, #EEE8DD 0%, #DDD5C5 100%);
            transform: translateY(-2px);
        }

        .login-notice a {
            color: #2D4A3E;
            font-weight: 500;
            text-decoration: none;
        }

        .login-notice a:hover {
            text-decoration: underline;
        }

        /* Login Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
            opacity: 1;
        }

        .modal-container {
            background: white;
            border-radius: 24px;
            width: 100%;
            max-width: 440px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-container {
            transform: translateY(0);
        }

        .modal-header {
            padding: 32px 40px 0;
            text-align: center;
        }

        .modal-logo {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: #1A3A2F;
            margin-bottom: 8px;
        }

        .modal-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: #1A3A2F;
            margin-bottom: 4px;
        }

        .modal-subtitle {
            color: #888;
            font-size: 0.95rem;
            margin-bottom: 32px;
        }

        .modal-tabs {
            display: flex;
            gap: 8px;
            padding: 0 40px;
            margin-bottom: 24px;
        }

        .modal-tab {
            flex: 1;
            padding: 14px;
            border: none;
            background: #f5f2eb;
            color: #666;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .modal-tab.active {
            background: #1A3A2F;
            color: white;
        }

        .modal-tab:hover:not(.active) {
            background: #e8e5dd;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border: none;
            background: #f5f2eb;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: #e8e5dd;
            color: #1A3A2F;
        }

        .modal-form {
            padding: 0 40px 40px;
        }

        .modal-form-group {
            margin-bottom: 20px;
        }

        .modal-form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            color: #666;
            margin-bottom: 8px;
            letter-spacing: 0.05em;
        }

        .modal-form-group input {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e5e5;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
            box-sizing: border-box;
        }

        .modal-form-group input:focus {
            outline: none;
            border-color: #1A3A2F;
            background: white;
            box-shadow: 0 0 0 4px rgba(26, 58, 47, 0.1);
        }

        .modal-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #1A3A2F 0%, #2D4A3E 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(26, 58, 47, 0.3);
        }

        .modal-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .modal-divider {
            display: flex;
            align-items: center;
            gap: 16px;
            margin: 24px 0;
            color: #999;
            font-size: 0.85rem;
        }

        .modal-divider::before,
        .modal-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e5e5;
        }

        .modal-error {
            background: #fff5f5;
            color: #c53030;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-bottom: 16px;
            display: none;
        }

        .modal-success {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .modal-success.show {
            display: block;
        }

        .modal-success-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .modal-success h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: #1A3A2F;
            margin-bottom: 12px;
        }

        .modal-success p {
            color: #666;
            line-height: 1.6;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        
        .success-message.show {
            display: block;
        }
        
        .success-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .success-message h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: #2D4A3E;
            margin-bottom: 12px;
        }
        
        .success-message p {
            color: #666;
            line-height: 1.6;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 40px;
            transition: color 0.3s ease;
        }
        
        .back-link:hover {
            color: #2D4A3E;
        }
        
        .includes-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid #eee;
        }
        
        .includes-section h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: #2D4A3E;
            margin-bottom: 20px;
        }
        
        .includes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .include-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            color: #444;
        }
        
        .include-item span:first-child {
            font-size: 1.25rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">lulutravel</a>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html#trips">Our Trips</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li id="auth-item-container"><a href="login.html" class="nav-cta" id="authLink">Sign In</a></li>
            </ul>
            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="nav-overlay" id="navOverlay"></div>

    <!-- Hero Section -->
    <section class="product-hero">
        <div class="product-hero-bg">
            <img src="https://images.unsplash.com/photo-1508804185872-d7badad00f7d?w=1920&q=80" alt="Classic China" onerror="this.style.background='#e8e4dd';this.style.minHeight='200px';this.alt='Image unavailable'">
        </div>
        <div class="product-hero-overlay"></div>
        <div class="product-hero-content">
            <span class="product-tag">Culture & History ¬∑ 8 Days</span>
            <h1 class="product-title">Classic China</h1>
            <p class="product-subtitle">Beijing ¬∑ Xi'an ¬∑ Shanghai</p>
            <div class="product-meta">
                <span>üèØ Imperial Highlights</span>
                <span>üë• 2-8 Travelers</span>
                <span>üìÖ Year Round</span>
            </div>
        </div>
    </section>

    <!-- Product Content -->
    <div class="product-container">
        <div class="product-content">
            <a href="index.html#trips" class="back-link">‚Üê Back to All Trips</a>
            
            <p class="product-description">
                Experience the essence of China on this carefully curated journey through three iconic cities. From the ancient wonders of Beijing to the modern marvels of Shanghai, discover 5,000 years of history with expert local guides who bring the past to life.
            </p>

            <div class="itinerary">
                <h3>Your Journey</h3>
                <div class="day-item">
                    <span class="day-number">Day 1-2</span>
                    <div class="day-content">
                        <h4>Beijing</h4>
                        <p>Forbidden City at dawn, Great Wall private section, Summer Palace by boat</p>
                    </div>
                </div>
                <div class="day-item">
                    <span class="day-number">Day 3-5</span>
                    <div class="day-content">
                        <h4>Xi'an</h4>
                        <p>Terracotta Warriors with archaeologist, ancient city wall cycling, Muslim Quarter food tour</p>
                    </div>
                </div>
                <div class="day-item">
                    <span class="day-number">Day 6-8</span>
                    <div class="day-content">
                        <h4>Shanghai</h4>
                        <p>French Concession heritage walk, water towns, farewell dinner with Huangpu River views</p>
                    </div>
                </div>
            </div>

            <div class="includes-section">
                <h3>What's Included</h3>
                <div class="includes-grid">
                    <div class="include-item"><span>üè®</span> Boutique hotels (4-5 star)</div>
                    <div class="include-item"><span>üçΩÔ∏è</span> All meals</div>
                    <div class="include-item"><span>üöó</span> Private transfers</div>
                    <div class="include-item"><span>üé´</span> All entrance fees</div>
                    <div class="include-item"><span>üé§</span> Expert local guides</div>
                    <div class="include-item"><span>üì±</span> 24/7 support</div>
                </div>
            </div>
        </div>

        <!-- Booking Card -->
        <div class="booking-section">
            <div class="booking-card">
                <div class="booking-header">
                    <div class="price-amount">$2,900</div>
                    <div class="price-note">per person, based on 2 travelers</div>
                </div>

                <!-- Login Notice (shown when not logged in) -->
                <div class="login-notice" id="loginNotice">
                    Please <a href="login.html">sign in</a> to book this trip
                </div>

                <!-- Booking Form (shown when logged in) -->
                <form class="booking-form" id="bookingForm" style="display:none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Travel Date</label>
                            <input type="date" id="travelDate" required>
                        </div>
                        <div class="form-group">
                            <label>Travelers</label>
                            <select id="travelers" required>
                                <option value="">Select</option>
                                <option value="2">2 People</option>
                                <option value="3">3 People</option>
                                <option value="4">4 People</option>
                                <option value="5">5 People</option>
                                <option value="6">6 People</option>
                                <option value="7">7 People</option>
                                <option value="8">8 People</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="fullName" placeholder="Your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="email" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="phone" placeholder="+1 234 567 8900" required>
                    </div>
                    <button type="submit" class="submit-btn">Request to Book</button>
                </form>

                <!-- Success Message -->
                <div class="success-message" id="successMessage">
                    <div class="success-icon">‚úÖ</div>
                    <h3>Thank You!</h3>
                    <p>Your inquiry has been received.<br>We'll contact you within 24 hours.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-container" style="position: relative;">
            <button class="modal-close" id="modalClose">‚úï</button>

            <!-- Login Form -->
            <div id="modalLoginContent">
                <div class="modal-header">
                    <div class="modal-logo">lulutravel</div>
                    <h2 class="modal-title" id="modalTitle">Welcome Back</h2>
                    <p class="modal-subtitle" id="modalSubtitle">Sign in to continue your journey</p>
                </div>

                <div class="modal-tabs">
                    <button class="modal-tab active" data-tab="signin">Sign In</button>
                    <button class="modal-tab" data-tab="signup">Sign Up</button>
                </div>

                <div class="modal-error" id="modalError"></div>

                <!-- Sign In Form -->
                <form class="modal-form" id="signinForm">
                    <div class="modal-form-group">
                        <label>Email</label>
                        <input type="email" id="modalEmail" placeholder="your@email.com" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Password</label>
                        <input type="password" id="modalPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="modal-btn">Sign In</button>
                </form>

                <!-- Sign Up Form -->
                <form class="modal-form" id="signupForm" style="display: none;">
                    <div class="modal-form-group">
                        <label>Full Name</label>
                        <input type="text" id="modalName" placeholder="Your full name" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Email</label>
                        <input type="email" id="modalSignupEmail" placeholder="your@email.com" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Password</label>
                        <input type="password" id="modalSignupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" required>
                    </div>
                    <button type="submit" class="modal-btn">Create Account</button>
                </form>

                <!-- Success State -->
                <div class="modal-success" id="modalSuccess">
                    <div class="modal-success-icon">üéâ</div>
                    <h3>Welcome!</h3>
                    <p>Your account has been created.<br>You can now book your trip.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <a href="index.html" class="logo">lulutravel</a>
                    <p>Premium small-group tours of China. Curated experiences, expert guides, and memories that last a lifetime.</p>
                    <div class="footer-social">
                        <a href="#" aria-label="Instagram">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618 6.98-6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <a href="#" aria-label="WeChat">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178A1.17 1.17 0 0 1 4.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813 0c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178 1.17 1.17 0 0 1-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826 0 1.622-.12 2.361-.336a.722.722 0 0 1 .598.082l1.584.926a.272.272 0 0 0 .14.047c.134 0 .24-.111.24-.247 0-.06-.023-.12-.038-.177l-.327-1.233a.582.582 0 0 1-.023-.156.49.49 0 0 1 .201-.398C23.024 18.48 24 16.82 24 14.98c0-3.21-2.931-5.837-6.656-6.088V8.89l-.006-.033zm-3.61 2.852c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.97-.982zm4.844 0c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.969-.982z"/>
                            </svg>
                        </a>
                        <a href="mailto:concierge@lulutravel.com" aria-label="Email">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                        </a>
                    </div>
                    <p style="margin-top: 16px; font-size: 0.875rem; color: var(--color-text-light);">
                        <a href="mailto:concierge@lulutravel.com" style="color: var(--color-green-dark);">concierge@lulutravel.com</a>
                    </p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Tours</h4>
                        <ul>
                            <li><a href="product-classic.html">Classic China</a></li>
                            <li><a href="product-culinary.html">Culinary Journey</a></li>
                            <li><a href="product-nature.html">Nature & Wellness</a></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="about.html">About Us</a></li>
                            <li><a href="faq.html">FAQ</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 lulutravel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navLinks = document.querySelector('.nav-links');

            if (mobileMenuBtn && navLinks) {
                mobileMenuBtn.addEventListener('click', function() {
                    navLinks.classList.toggle('active');
                    this.classList.toggle('active');
                });

                // Close menu when clicking a link
                navLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function() {
                        navLinks.classList.remove('active');
                        mobileMenuBtn.classList.remove('active');
                    });
                });
            }

            // Modal functionality
            // initLoginModal();
        });

        /*
        function initLoginModal() {
            const modal = document.getElementById('loginModal');
            const loginNotice = document.getElementById('loginNotice');
            const modalClose = document.getElementById('modalClose');
            const modalTabs = document.querySelectorAll('.modal-tab');
            const signinForm = document.getElementById('signinForm');
            const signupForm = document.getElementById('signupForm');
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const modalSuccess = document.getElementById('modalSuccess');
            const modalLoginContent = document.getElementById('modalLoginContent');
            const modalError = document.getElementById('modalError');

            // Open modal when clicking login notice
            if (loginNotice) {
                loginNotice.addEventListener('click', function(e) {
                    e.preventDefault();
                    openModal();
                });
            }

            // Close modal
            if (modalClose) {
                modalClose.addEventListener('click', closeModal);
            }

            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) closeModal();
                });
            }

            // Tab switching
            modalTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    modalTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');

                    const tabName = this.dataset.tab;
                    if (tabName === 'signin') {
                        signinForm.style.display = 'block';
                        signupForm.style.display = 'none';
                        modalTitle.textContent = 'Welcome Back';
                        modalSubtitle.textContent = 'Sign in to continue your journey';
                    } else {
                        signinForm.style.display = 'none';
                        signupForm.style.display = 'block';
                        modalTitle.textContent = 'Create Account';
                        modalSubtitle.textContent = 'Join us for your China adventure';
                    }
                    modalError.style.display = 'none';
                });
            });

            // Sign In form submission
            if (signinForm) {
                signinForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const email = document.getElementById('modalEmail').value;
                    const password = document.getElementById('modalPassword').value;
                    const btn = this.querySelector('.modal-btn');

                    btn.textContent = 'Signing in...';
                    btn.disabled = true;
                    modalError.style.display = 'none';

                    try {
                        const { data, error } = await supabase.auth.signInWithPassword({
                            email,
                            password
                        });

                        if (error) {
                            modalError.textContent = error.message;
                            modalError.style.display = 'block';
                        } else {
                            closeModal();
                            checkAuth();
                        }
                    } catch (err) {
                        modalError.textContent = 'An error occurred. Please try again.';
                        modalError.style.display = 'block';
                    } finally {
                        btn.textContent = 'Sign In';
                        btn.disabled = false;
                    }
                });
            }

            // Sign Up form submission
            if (signupForm) {
                signupForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    const name = document.getElementById('modalName').value;
                    const email = document.getElementById('modalSignupEmail').value;
                    const password = document.getElementById('modalSignupPassword').value;
                    const btn = this.querySelector('.modal-btn');

                    btn.textContent = 'Creating account...';
                    btn.disabled = true;
                    modalError.style.display = 'none';

                    try {
                        const { data, error } = await supabase.auth.signUp({
                            email,
                            password,
                            options: {
                                data: { name }
                            }
                        });

                        if (error) {
                            modalError.textContent = error.message;
                            modalError.style.display = 'block';
                        } else if (data.user && data.session === null) {
                            // Email confirmation required
                            modalSuccess.querySelector('p').innerHTML = 'Please check your email to confirm your account.<br>Then sign in to book your trip.';
                            modalSuccess.querySelector('h3').textContent = 'Check Your Email';
                            modalSuccess.querySelector('.modal-success-icon').textContent = 'üìß';
                            signinForm.style.display = 'none';
                            signupForm.style.display = 'none';
                            modalLoginContent.querySelector('.modal-tabs').style.display = 'none';
                            modalSuccess.classList.add('show');
                        } else {
                            // Auto sign in
                            closeModal();
                            checkAuth();
                        }
                    } catch (err) {
                        modalError.textContent = 'An error occurred. Please try again.';
                        modalError.style.display = 'block';
                    } finally {
                        btn.textContent = 'Create Account';
                        btn.disabled = false;
                    }
                });
            }

            function openModal() {
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
                // Reset modal state
                resetModalState();
            }

            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }

            function resetModalState() {
                modalTabs.forEach(t => t.classList.remove('active'));
                modalTabs[0].classList.add('active');
                signinForm.style.display = 'block';
                signupForm.style.display = 'none';
                signinForm.reset();
                signupForm.reset();
                modalTitle.textContent = 'Welcome Back';
                modalSubtitle.textContent = 'Sign in to continue your journey';
                modalError.style.display = 'none';
                modalSuccess.classList.remove('show');
                modalLoginContent.querySelector('.modal-tabs').style.display = 'flex';
            }
        }
        */

        async function checkAuth() {
            const { data: { session } } = await supabase.auth.getSession();
            const form = document.getElementById('bookingForm');
            const notice = document.getElementById('loginNotice');
            const authLink = document.getElementById('authLink');

            if (session && session.user) {
                authLink.textContent = 'My Account';
                authLink.href = 'profile.html';
                form.style.display = 'flex';
                notice.style.display = 'none';

                if (session.user.user_metadata && session.user.user_metadata.name) {
                    document.getElementById('fullName').value = session.user.user_metadata.name;
                }
                document.getElementById('email').value = session.user.email || '';
            } else {
                authLink.textContent = 'Sign In';
                const currentPath = window.location.pathname.split('/').pop() || 'index.html';
                const redirect = currentPath + window.location.search;
                const loginUrl = `login.html?redirect=${encodeURIComponent(redirect)}`;
                authLink.href = loginUrl;
                form.style.display = 'none';
                notice.style.display = 'block';
                // Update notice link
                const noticeLink = notice.querySelector('a');
                if (noticeLink) noticeLink.href = loginUrl;
            }
        }

        // Listen for auth state changes
        supabase.auth.onAuthStateChange((event, session) => {
            checkAuth();
        });

        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const btn = this.querySelector('.submit-btn');
            btn.textContent = 'Submitting...';
            btn.disabled = true;

            // Get current user
            const { data: { user } } = await supabase.auth.getUser();
            console.log('Submitting order for user:', user?.id);

            if (!user) {
                alert('Please sign in first');
                return;
            }

            const formData = {
                user_id: user.id,
                tour_name: 'Classic China',
                tour_route: 'Beijing ¬∑ Xi\'an ¬∑ Shanghai',
                tour_icon: 'üèØ',
                price: 2900,
                travel_date: document.getElementById('travelDate').value,
                travelers: parseInt(document.getElementById('travelers').value),
                contact_name: document.getElementById('fullName').value,
                contact_email: document.getElementById('email').value,
                contact_phone: document.getElementById('phone').value,
                status: 'pending'
            };

            try {
                const { error } = await supabase.from('orders').insert([pendingBookingData]);
                if (error) {
                    console.error('Supabase Insert Error:', error);
                    alert('Error submitting. Please try again: ' + error.message);
                    btn.textContent = 'Request to Book';
                    btn.disabled = false;
                } else {
                    this.style.display = 'none';
                    document.querySelector('.booking-header').style.display = 'none';
                    document.getElementById('successMessage').classList.add('show');
                }
            } catch (err) {
                console.error('Unexpected Error:', err);
                alert('An error occurred. Please try again.');
                btn.textContent = 'Request to Book';
                btn.disabled = false;
            }
        });

        window.addEventListener('scroll', () => {
            const nav = document.querySelector('.nav');
            nav.classList.toggle('scrolled', window.scrollY > 100);
        });

        checkAuth();
    </script>
    <script src="js/main.js"></script>
</body>
</html>
