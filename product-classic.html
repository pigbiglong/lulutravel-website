<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic China - 8 Days | lulutravel</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        .product-hero {
            position: relative;
            height: 70vh;
            min-height: 500px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        
        .product-hero-bg {
            position: absolute;
            inset: 0;
        }
        
        .product-hero-bg img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-hero-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(26,26,26,0.9) 0%, rgba(26,26,26,0.3) 50%, transparent 100%);
        }
        
        .product-hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            color: white;
            padding-bottom: 80px;
            max-width: 800px;
        }
        
        .product-tag {
            display: inline-block;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: #C4A77D;
            margin-bottom: 16px;
        }
        
        .product-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 400;
            line-height: 1.1;
            margin-bottom: 16px;
        }
        
        .product-subtitle {
            font-size: 1.25rem;
            font-weight: 300;
            opacity: 0.9;
            margin-bottom: 24px;
        }
        
        .product-meta {
            display: flex;
            gap: 32px;
            justify-content: center;
            font-size: 0.95rem;
        }
        
        .product-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .product-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 40px;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 80px;
        }
        
        @media (max-width: 900px) {
            .product-container {
                grid-template-columns: 1fr;
                padding: 60px 24px;
            }
        }
        
        .product-content {
            padding-right: 40px;
        }
        
        @media (max-width: 900px) {
            .product-content {
                padding-right: 0;
            }
        }
        
        .product-description {
            font-size: 1.1rem;
            color: #444;
            line-height: 1.9;
            margin-bottom: 40px;
        }
        
        .itinerary {
            margin: 50px 0;
        }
        
        .itinerary h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: #2D4A3E;
            margin-bottom: 24px;
        }
        
        .day-item {
            display: flex;
            gap: 24px;
            padding: 24px 0;
            border-bottom: 1px solid #eee;
        }
        
        .day-item:last-child {
            border-bottom: none;
        }
        
        .day-number {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.25rem;
            font-weight: 500;
            color: #2D4A3E;
            min-width: 60px;
        }
        
        .day-content h4 {
            font-size: 1.1rem;
            color: #1A1A1A;
            margin-bottom: 6px;
        }
        
        .day-content p {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.6;
        }
        
        .booking-section {
            position: relative;
        }
        
        .booking-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.08);
            position: sticky;
            top: 100px;
        }
        
        .booking-header {
            text-align: center;
            padding-bottom: 24px;
            border-bottom: 1px solid #eee;
            margin-bottom: 24px;
        }
        
        .price-amount {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3rem;
            font-weight: 500;
            color: #2D4A3E;
        }
        
        .price-note {
            font-size: 0.9rem;
            color: #888;
            margin-top: 4px;
        }
        
        .booking-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-group {
            position: relative;
        }
        
        .form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 500;
            color: #666;
            margin-bottom: 8px;
            letter-spacing: 0.05em;
        }
        
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 16px;
            border: 1px solid #e5e5e5;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #2D4A3E;
            background: white;
            box-shadow: 0 0 0 4px rgba(45, 74, 62, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #2D4A3E 0%, #4A7C59 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(45, 74, 62, 0.3);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .login-notice {
            background: linear-gradient(135deg, #F5F2EB 0%, #EEE8DD 100%);
            padding: 16px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .login-notice a {
            color: #2D4A3E;
            font-weight: 500;
            text-decoration: none;
        }
        
        .login-notice a:hover {
            text-decoration: underline;
        }
        
        .success-message {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        
        .success-message.show {
            display: block;
        }
        
        .success-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .success-message h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: #2D4A3E;
            margin-bottom: 12px;
        }
        
        .success-message p {
            color: #666;
            line-height: 1.6;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #666;
            text-decoration: none;
            font-size: 0.9rem;
            margin-bottom: 40px;
            transition: color 0.3s ease;
        }
        
        .back-link:hover {
            color: #2D4A3E;
        }
        
        .includes-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid #eee;
        }
        
        .includes-section h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: #2D4A3E;
            margin-bottom: 20px;
        }
        
        .includes-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .include-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            color: #444;
        }
        
        .include-item span:first-child {
            font-size: 1.25rem;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="index.html" class="logo">lulutravel</a>
            <ul class="nav-links">
                <li><a href="index.html#trips">Our Trips</a></li>
                <li><a href="index.html#why-us">Why Us</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li><a href="login.html" class="nav-cta" id="authLink">Sign In</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="product-hero">
        <div class="product-hero-bg">
            <img src="https://images.unsplash.com/photo-1508804185872-d7badad00f7d?w=1920&q=80" alt="Classic China">
        </div>
        <div class="product-hero-overlay"></div>
        <div class="product-hero-content">
            <span class="product-tag">Culture & History ¬∑ 8 Days</span>
            <h1 class="product-title">Classic China</h1>
            <p class="product-subtitle">Beijing ¬∑ Xi'an ¬∑ Shanghai</p>
            <div class="product-meta">
                <span>üèØ Imperial Highlights</span>
                <span>üë• 2-8 Travelers</span>
                <span>üìÖ Year Round</span>
            </div>
        </div>
    </section>

    <!-- Product Content -->
    <div class="product-container">
        <div class="product-content">
            <a href="index.html#trips" class="back-link">‚Üê Back to All Trips</a>
            
            <p class="product-description">
                Experience the essence of China on this carefully curated journey through three iconic cities. From the ancient wonders of Beijing to the modern marvels of Shanghai, discover 5,000 years of history with expert local guides who bring the past to life.
            </p>

            <div class="itinerary">
                <h3>Your Journey</h3>
                <div class="day-item">
                    <span class="day-number">Day 1-2</span>
                    <div class="day-content">
                        <h4>Beijing</h4>
                        <p>Forbidden City at dawn, Great Wall private section, Summer Palace by boat</p>
                    </div>
                </div>
                <div class="day-item">
                    <span class="day-number">Day 3-5</span>
                    <div class="day-content">
                        <h4>Xi'an</h4>
                        <p>Terracotta Warriors with archaeologist, ancient city wall cycling, Muslim Quarter food tour</p>
                    </div>
                </div>
                <div class="day-item">
                    <span class="day-number">Day 6-8</span>
                    <div class="day-content">
                        <h4>Shanghai</h4>
                        <p>French Concession heritage walk, water towns, farewell dinner with Huangpu River views</p>
                    </div>
                </div>
            </div>

            <div class="includes-section">
                <h3>What's Included</h3>
                <div class="includes-grid">
                    <div class="include-item"><span>üè®</span> Boutique hotels (4-5 star)</div>
                    <div class="include-item"><span>üçΩÔ∏è</span> All meals</div>
                    <div class="include-item"><span>üöó</span> Private transfers</div>
                    <div class="include-item"><span>üé´</span> All entrance fees</div>
                    <div class="include-item"><span>üé§</span> Expert local guides</div>
                    <div class="include-item"><span>üì±</span> 24/7 support</div>
                </div>
            </div>
        </div>

        <!-- Booking Card -->
        <div class="booking-section">
            <div class="booking-card">
                <div class="booking-header">
                    <div class="price-amount">$2,900</div>
                    <div class="price-note">per person, based on 2 travelers</div>
                </div>

                <!-- Login Notice (shown when not logged in) -->
                <div class="login-notice" id="loginNotice">
                    Please <a href="login.html">sign in</a> to book this trip
                </div>

                <!-- Booking Form (shown when logged in) -->
                <form class="booking-form" id="bookingForm" style="display:none;">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Travel Date</label>
                            <input type="date" id="travelDate" required>
                        </div>
                        <div class="form-group">
                            <label>Travelers</label>
                            <select id="travelers" required>
                                <option value="">Select</option>
                                <option value="2">2 People</option>
                                <option value="3">3 People</option>
                                <option value="4">4 People</option>
                                <option value="5">5 People</option>
                                <option value="6">6 People</option>
                                <option value="7">7 People</option>
                                <option value="8">8 People</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="fullName" placeholder="Your full name" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="email" placeholder="your@email.com" required>
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="phone" placeholder="+1 234 567 8900" required>
                    </div>
                    <button type="submit" class="submit-btn">Request to Book</button>
                </form>

                <!-- Success Message -->
                <div class="success-message" id="successMessage">
                    <div class="success-icon">‚úÖ</div>
                    <h3>Thank You!</h3>
                    <p>Your inquiry has been received.<br>We'll contact you within 24 hours.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2026 lulutravel. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Êú¨Âú∞Â≠òÂÇ®Ê®°ÊãüÔºàÁî®‰∫éÊºîÁ§∫Ôºâ
        const localAuth = {
            currentUser: JSON.parse(localStorage.getItem('lulutravel_currentUser') || 'null'),
            getSession: function() { return { data: { session: this.currentUser ? { user: this.currentUser } : null } }; }
        };

        const auth = {
            getSession: async () => localAuth.getSession(),
            onAuthStateChange: (cb) => null
        };

        async function checkAuth() {
            const { data: { session } } = await auth.getSession();
            const form = document.getElementById('bookingForm');
            const notice = document.getElementById('loginNotice');
            const authLink = document.getElementById('authLink');

            if (session) {
                authLink.textContent = 'My Account';
                authLink.href = 'profile.html';
                form.style.display = 'flex';
                notice.style.display = 'none';
                
                if (session.user.user_metadata && session.user.user_metadata.name) {
                    document.getElementById('fullName').value = session.user.user_metadata.name;
                }
                document.getElementById('email').value = session.user.email || '';
            } else {
                authLink.textContent = 'Sign In';
                authLink.href = 'login.html';
                form.style.display = 'none';
                notice.style.display = 'block';
            }
        }

        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            const btn = this.querySelector('.submit-btn');
            btn.textContent = 'Submitting...';
            btn.disabled = true;

            const formData = {
                tour_name: 'Classic China',
                tour_route: 'Beijing ¬∑ Xi\'an ¬∑ Shanghai',
                tour_icon: 'üèØ',
                price: 2900,
                travel_date: document.getElementById('travelDate').value,
                travelers: parseInt(document.getElementById('travelers').value),
                name: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                status: 'pending'
            };

            try {
                const { error } = await supabase.from('orders').insert([formData]);
                if (error) {
                    alert('Error submitting. Please try again.');
                } else {
                    this.style.display = 'none';
                    document.querySelector('.booking-header').style.display = 'none';
                    document.getElementById('successMessage').classList.add('show');
                }
            } catch (err) {
                alert('An error occurred. Please try again.');
            } finally {
                btn.textContent = 'Request to Book';
                btn.disabled = false;
            }
        });

        window.addEventListener('scroll', () => {
            const nav = document.querySelector('.nav');
            nav.classList.toggle('scrolled', window.scrollY > 100);
        });

        checkAuth();
        // Auth state change not needed for local auth
    </script>
</body>
</html>
